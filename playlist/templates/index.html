<!doctype html>
<head>
    <title>Playlist</title>
    <script src="{{ url_for('static', filename='jquery-1.11.1.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='angular.js') }}" type="text/javascript"></script>
</head>
<body>
    <section>
    <h1>Available</h1>
    <ul>
        {% for id,song in session.available_songs %}
        <li data-song-id="{{ id }}">{{ song }}</li>
        {% endfor %}
    </ul>
    </section>

    <section>
        <button type="button" class="media-action" id="stop">Stop</button>
        <button type="button" class="media-action" id="pause">Pause</button>
        <button type="button" class="media-action" id="play">Play</button>
    </section>

    <section>
        <h1>Playlist Queue</h1>
        <ul id="active-playlist"></ul>
    </section>

    <script>

    // Event Listeners
    $("li").click(function() {
        var songName = $(this).text();
        var songId = $(this).data("song-id");
        console.log("id: " + songId + " - " + songName);
        $.post("{{ url_for('add_song') }}", {'songId': songId}, function(data) {
            console.log(data);
            var newSong = "<li data-song-id='" + songId + "'>" + songName + "</li>"; 
            $("#active-playlist").append(newSong);
        });
    });

    $("#pause").click(function() {
        var action = $(this).text();
        if(action === "Pause") {
            $(this).text("Continue");
        } else {
            $(this).text("Pause");
        }
    });

    $(".media-action").click(function() {
        var action = $(this).attr('id');
        $.post("{{ url_for('process_media_action') }}", {'action': action}, function(data) {
            console.log(data); 
        });
    });
    </script>
</body>
